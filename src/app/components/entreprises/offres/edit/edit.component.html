<div *ngIf="offre!=null" class="container">

		<!-- TEXTE -->
		<div class="row">
			<div class="col-12">
				<br>
				<p>
					<i *ngIf="offre.id!=null">Edition d'une offre d'emploi</i> 
					<i *ngIf="offre.id==null">Création d'une offre d'emploi</i>
				</p>
			</div>
		</div>
		<div class="row">
			<form [formGroup]="angForm" class="col-12" novalidate>

				<div class="form-group text-right">
					<button type="button" class="btn btn-primary" (click)="saveOrUpdate()" title="Enregistrer"><i class="fa fa-check" aria-hidden="true"></i></button>&nbsp;
					<button *ngIf="offre.id!=null" type="button" class="btn btn-primary" (click)="delete()" title="Supprimer"><i class="fa fa-trash" aria-hidden="true"></i></button>&nbsp;
					<button type="button" class="btn btn-primary" (click)="cancel()" title="Annuler"><i class="fa fa-times" aria-hidden="true"></i></button>&nbsp;
				</div>

				<div class="form-group row">
					<label for="titre" class="font-weight-bold col-sm-3 col-lg-2 col-form-label">Titre*</label>
					<input [ngClass]="{ 'is-invalid': submitted && f.titre.errors }" class="form-control col-sm-9" type="text" formControlName="titre" name="titre" [(ngModel)]="offre.titre">					
					<div *ngIf="submitted && f.titre.errors" class="invalid-feedback">
						<div *ngIf="f.titre.errors" class="offset-sm-3 offset-lg-2" >Le titre est requis (5 à 250 caractères)</div>
					</div>
				</div>
				<div class="form-group row">
					<label for="dtParution" class="font-weight-bold col-sm-3 col-form-label col-lg-2">Parution*</label>
					<input [ngClass]="{ 'is-invalid': submitted && f.dtParution.errors }" class="form-control col-sm-4 col-md-3 col-lg-2" type="date" formControlName="dtParution" name="dtParution" [(ngModel)]="offre.dtParution">
						<div *ngIf="submitted && f.dtParution.errors" class="invalid-feedback">
							<div *ngIf="f.dtParution.errors" class="offset-sm-3 offset-lg-2">La date de parution est requise</div>
						</div>
				</div>
				<div class="form-group row">
					<label for="pourvu" class="font-weight-bold col-sm-3 col-form-label col-lg-2">Pourvu</label> 
						<input class="form-control col-sm-1" type="checkbox" name="pourvu" [(ngModel)]="offre.pourvu" formControlName="pourvu">
				</div>
				<div class="form-group row">
					<label for="salaireBrut" class="font-weight-bold col-sm-3 col-form-label col-lg-2">Salaire brut*</label> 
					<input [ngClass]="{ 'is-invalid': submitted && f.salaireBrut.errors }" class="form-control col-sm-2 col-lg-1" min="0" value="0" step="0.01" type="number" formControlName="salaireBrut" name="salaireBrut" placeholder="0.00" [(ngModel)]="offre.salaireBrut">
						<div *ngIf="submitted && f.salaireBrut.errors" class="invalid-feedback">
							<div *ngIf="f.salaireBrut.errors" class="offset-sm-3 offset-lg-2">Le salaire brut est requis</div>
						</div>
				</div>
				<div class="form-group row">
					<label for="contrat" class="font-weight-bold col-sm-3 col-form-label col-lg-2">Contrat*</label> 

					<select formControlName="contrat" class="font-weight-bold col-sm-3 col-form-label col-lg-2" [(ngModel)]="offre.contrat" name="contrat">
						<option value=""></option>
						<option [ngValue]="item" *ngFor="let item of contrats">{{item.nom}}</option>
					</select>
					<div *ngIf="submitted && f.contrat.errors" class="invalid-feedback">
							<div *ngIf="f.contrat.errors" class="offset-sm-3 offset-lg-2">Le type de contrat est requis</div>
						</div>

				
					<label for="dureeContrat" class="font-weight-bold col-sm-3 col-md-3 col-md-offset-1	offset-lg-1 col-lg-2 col-form-label">Durée (mois)</label> 
					<input [ngClass]="{ 'is-invalid': submitted && f.dureeContrat.errors }" class="form-control col-sm-2 col-lg-1" type="number" name="dureeContrat" formControlName="dureeContrat" [(ngModel)]="offre.dureeContrat">
					
				</div>
				<div class="form-group row">
					<label for="commune"
						class="font-weight-bold col-sm-3 col-form-label col-lg-2">Commune*</label> 
						<input [ngClass]="{ 'is-invalid': submitted && f.commune.errors }" class="form-control col-sm-9" type="text" formControlName="commune" name="commune" [(ngModel)]="offre.commune">
						<div *ngIf="submitted && f.commune.errors" class="invalid-feedback">
							<div *ngIf="f.commune.errors" class="offset-sm-3 offset-lg-2">La commune est requise (5 à 50 caractères)</div>
						</div>
				</div>
				<div class="form-group row">
					<label for="description" class="font-weight-bold col-sm-3 col-form-label col-lg-2">Description*</label>
					<textarea [ngClass]="{ 'is-invalid': submitted && f.description.errors }" class="form-control col-sm-9" type="text" formControlName="description" name="description" [(ngModel)]="offre.description"></textarea>
						<div *ngIf="submitted && f.description.errors" class="invalid-feedback">
							<div *ngIf="f.description.errors" class="offset-sm-3 offset-lg-2">La description est requise (20 à 1024 caractères)</div>
						</div>
				</div>
				
				<div class="form-group row">
					<div *ngIf="messageError" class="col-12 alert alert-danger">{{messageError}}</div>
					<div *ngIf="messageSuccess" class="col-12 alert alert-success">{{messageSuccess}}</div>
				</div>
			</form>
		</div>
	</div>